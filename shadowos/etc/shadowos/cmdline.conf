# ShadowOS Kernel Command Line Reference
# /etc/shadowos/cmdline.conf
#
# Kernel parameters for different boot modes
#

# =============================================================================
# HIDDEN BOOT (Stealth Mode)
# =============================================================================
# Triggers hidden volume decryption
#
# Minimal:
#   shadowboot
#
# Full stealth:
#   shadowboot quiet loglevel=0 rd.systemd.show_status=false
#
# RAM-only (nothing written to disk):
#   shadowboot toram quiet

CMDLINE_HIDDEN="shadowboot quiet loglevel=0 noswap rd.crash=no"

# =============================================================================
# SECURITY HARDENING
# =============================================================================

# Disable swap (cold boot attack prevention)
CMDLINE_NOSWAP="noswap"

# Disable crash dumps
CMDLINE_NOCRASH="rd.crash=no crashkernel=0"

# Disable core dumps
CMDLINE_NOCORE="kernel.core_pattern=|/bin/false"

# Disable sysrq (magic keys)
CMDLINE_NOSYSRQ="kernel.sysrq=0"

# LSM stack
CMDLINE_LSM="lsm=landlock,lockdown,yama,apparmor"

# =============================================================================
# FULL STEALTH CMDLINE
# =============================================================================

CMDLINE_FULL="shadowboot quiet loglevel=0 noswap rd.crash=no kernel.core_pattern=|/bin/false kernel.sysrq=0 lsm=landlock,lockdown,yama,apparmor"

# =============================================================================
# GRUB ENTRIES
# =============================================================================
#
# Hidden entry (press 'h'):
#   menuentry "" --hotkey=h {
#       linux /boot/vmlinuz $CMDLINE_FULL
#       initrd /boot/initramfs.img
#   }
#
# Debug entry (press 'd'):
#   menuentry "" --hotkey=d {
#       linux /boot/vmlinuz shadowboot debug
#       initrd /boot/initramfs.img
#   }
#
# Emergency entry (press 'e'):
#   menuentry "" --hotkey=e {
#       linux /boot/vmlinuz shadowboot emergency
#       initrd /boot/initramfs.img
#   }
